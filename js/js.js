"use strict";angular.module("app",["ui.router","ngCookies","validation"]).run(["$rootScope",function(t){}]),angular.module("app").value("dict",{}).run(["dict","$http",function(t,e){e({method:"get",url:"data/city.json",responseType:"json"}).then(function(e){t.city=e.data},function(t){console.log("请求失败："+t.status+","+t.statusText)}),e({method:"get",url:"data/salary.json",responseType:"json"}).then(function(e){t.salary=e.data},function(t){console.log("请求失败："+t.status+","+t.statusText)}),e({method:"get",url:"data/scale.json",responseType:"json"}).then(function(e){t.scale=e.data},function(t){console.log("请求失败："+t.status+","+t.statusText)})}]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("main",{url:"/main",templateUrl:"view/main.html",controller:"mainCtrl"}).state("show",{url:"/show/:id",templateUrl:"view/show.html",controller:"showCtrl"}).state("company",{url:"/company/:id",templateUrl:"view/company.html",controller:"companyCtrl"}).state("search",{url:"/search",templateUrl:"view/search.html",controller:"searchCtrl"}).state("my",{url:"/my",templateUrl:"view/my.html",controller:"myCtrl"}).state("login",{url:"/login",templateUrl:"view/login.html",controller:"loginCtrl"}).state("regist",{url:"/regist",templateUrl:"view/regist.html",controller:"registCtrl"}).state("favorite",{url:"/favorite",templateUrl:"view/favorite.html",controller:"favoriteCtrl"}).state("post",{url:"/post",templateUrl:"view/post.html",controller:"postCtrl"}),e.otherwise("main")}]),angular.module("app").config(["$validationProvider",function(t){var e={phone:/^1[\d]{10}$/,password:function(t){return(t+"").length>5},required:function(t){return""!=t}},n={phone:{success:"",error:"必须是11位数字"},password:{success:"",error:"长度至少六位"},required:{success:"",error:"不能为空"}};t.setExpression(e).setDefaultMsg(n)}]),angular.module("app").controller("companyCtrl",["$scope","$http","$state",function(t,e,n){e({method:"get",url:"data/company.json?id="+n.params.id,responseType:"json"}).then(function(e){t.company=e.data,t.showPositionList(0)},function(t){console.log("请求失败："+t.status+","+t.statusText)}),t.back=function(){window.history.back()},t.showPositionList=function(e){t.positionList=t.company.positionClass[e].positionList,t.isActive=e}}]),angular.module("app").controller("favoriteCtrl",["$scope","$http",function(t,e){t.back=function(){window.history.back()},e({method:"get",url:"data/myFavorite.json",responseType:"json"}).then(function(e){t.favorite=e.data,console.log(t.favorite)},function(t){console.log("请求失败："+t.status+","+t.statusText)})}]),angular.module("app").controller("loginCtrl",["cache","$state","$scope","$http",function(t,e,n,o){n.submit=function(){try{o({method:"get",url:"data/login.json?user="+n.user,responseType:"json"}).then(function(n){console.log(n.data),t.id=n.data.id,t.name=n.data.name,t.image=n.data.image,e.go("main")},function(t){console.log("请求失败："+t.status+","+t.statusText)})}catch(t){console.log(t)}}}]),angular.module("app").controller("mainCtrl",["cache","$scope","$http",function(t,e,n){n({method:"get",url:"data/positionList.json",responseType:"json"}).then(function(t){e.list=t.data},function(t){console.log("请求失败："+t.status+","+t.statusText)}),t.name?(e.isLogin=!0,e.name=t.name):e.isLogin=!1}]),angular.module("app").controller("myCtrl",["cache","$state","$scope","$http",function(t,e,n,o){t.name&&(n.name=t.name,n.image=t.image),n.loginOut=function(){t.id="",t.image="",t.name="",e.go("main")}}]),angular.module("app").controller("postCtrl",["$scope","$http",function(t,e){t.tabList=[{id:"all",name:"全部"},{id:"pass",name:"面试邀请"},{id:"fail",name:"不合适"}],e({method:"get",url:"data/myPost.json",responseType:"json"}).then(function(e){t.data=e.data},function(t){console.log("请求失败："+t.status+","+t.statusText)}),t.filterObj={},t.tClick=function(e,n){switch(e){case"all":delete t.filterObj.state;break;case"pass":t.filterObj.state="1";break;case"fail":t.filterObj.state="-1"}},t.back=function(){window.history.back()}}]),angular.module("app").controller("registCtrl",["$state","$scope","$http","$interval",function(t,e,n,o){e.submit=function(){try{n({method:"get",url:"data/regist.json?user="+e.user,responseType:"json"}).then(function(e){t.go("login")},function(t){console.log("请求失败："+t.status+","+t.statusText)})}catch(t){console.log(t)}},e.time="",e.user={},e.send=function(){n({method:"get",url:"data/code.json",responseType:"json"}).then(function(t){if(1===t.data.state){e.time="60s";var n=60;e.interval=o(function(){n<=0?(e.time="",o.cancel(e.interval)):(n--,e.time=n+"s")},1e3)}},function(t){console.log("请求失败："+t.status+","+t.statusText)})}}]),angular.module("app").controller("searchCtrl",["$scope","$http","dict",function(t,e,n){t.search=function(){e({method:"get",url:"data/positionList.json?name="+t.name,responseType:"json"}).then(function(e){t.list=e.data},function(t){console.log("请求失败："+t.status+","+t.statusText)})},t.name="",t.search(),t.tabList=[{id:"city",name:"城市"},{id:"salary",name:"薪水"},{id:"scale",name:"公司规模"}],t.sheet={};var o="";t.tClick=function(e,a){o=e,t.sheet.list=n[e],t.sheet.visible=!0},t.filterObj={},t.sClick=function(e,n){e?(angular.forEach(t.tabList,function(t){t.id===o&&(t.name=n)}),t.filterObj[o+"Id"]=e):(delete t.filterObj[o+"Id"],angular.forEach(t.tabList,function(t){if(t.id===o)switch(t.id){case"city":t.name="城市";break;case"salary":t.name="薪水";break;case"scale":t.name="公司规模"}}))}}]),angular.module("app").controller("showCtrl",["cache","$q","$scope","$http","$state",function(t,e,n,o,a){n.isLogin=!1,t.name&&(n.isLogin=!0),n.imagePath="images/star.png",n.imageActive=function(){n.isActive=!n.isActive,n.imagePath=n.isActive?"images/star-active.png":"images/star.png"},o({method:"get",url:"data/position.json?id="+a.params.id,responseType:"json"}).then(function(t){n.positions=t.data},function(t){console.log("请求失败："+t.status+","+t.statusText)}),n.back=function(){window.history.back()},n.message=n.isLogin?"投个简历":"去登陆",n.send=function(){n.isLogin?n.message="已投递":a.go("login")}}]),angular.module("app").directive("appFooter",[function(){return{restrict:"A",replace:!0,templateUrl:"view/template/foot.html"}}]).directive("showFooter1",[function(){return{restrict:"A",replace:!0,templateUrl:"view/template/showFoot1.html"}}]),angular.module("app").directive("appHead",["cache",function(t){return{restrict:"A",replace:!0,templateUrl:"view/template/head.html",link:function(e){e.name=t.name||""}}}]),angular.module("app").directive("appPositonList",["$http",function(t){return{restrict:"A",replace:!0,scope:{list:"=",filterObj:"=",isFavorite:"="},templateUrl:"view/template/list1.html",link:function(e){e.select=function(e){t({method:"get",url:"data/favorite.json?id="+e.id+"&select="+!e.select,responseType:"json"}).then(function(t){e.select=!e.select},function(t){console.log("请求失败："+t.status+","+t.statusText)})}}}}]),angular.module("app").directive("appSheet",[function(){return{restrict:"A",replace:!0,scope:{list:"=",visible:"=",select:"&"},templateUrl:"view/template/sheet.html"}}]),angular.module("app").directive("appTab",[function(){return{restrict:"A",replace:!0,scope:{tabClick:"&",list:"="},templateUrl:"view/template/searchTab.html",link:function(t){t.click=function(e){t.selectId=e.id,t.tabClick(e)}}}}]),angular.module("app").filter("filterByObj",[function(){return function(t,e){var n=[];return angular.forEach(t,function(t){var o=!0;for(var a in e)t[a]!=e[a]&&(o=!1);o&&n.push(t)}),n}}]),angular.module("app").service("cache",["$cookies",function(t){this.put=function(e,n){t.put(e,n)},this.get=function(e){return t.get(e)},this.remove=function(e){t.remove(e)}}]);